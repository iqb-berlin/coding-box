<div class="bulk-dialog-container">
  <h2 class="dialog-title">Massen-Erstellung von Kodieraufträgen</h2>
  <mat-divider></mat-divider>

  <div class="dialog-content">
    <p class="info-text">
      Die folgenden {{ jobPreviews.length }} Kodieraufträge werden erstellt:
    </p>

    <div class="jobs-preview">
      @for (job of jobPreviews; track job.name) {
        <div class="job-preview-item">
          <div class="job-header">
            <span class="job-name">{{ job.name }}</span>
          </div>
          <div class="variable-info">
            @if (job.variable) {
              Variable: {{ job.variable.unitName }} → {{ job.variable.variableId }}
            } @else if (job.bundle) {
              Variablenbündel: {{ job.bundle.variables?.length || 0 }} Variablen
            }
          </div>
        </div>
      }
    </div>

    <div class="coders-section">
      <h3>Kodierer-Zuweisung</h3>
      <p>Auf alle Aufträge werden zugewiesen:</p>
      <div class="coders-list">
        @for (coder of data.selectedCoders; track coder.id) {
          <mat-chip class="coder-chip">
            <mat-icon>person</mat-icon>
            {{ coder.displayName || coder.name }}
          </mat-chip>
        }
      </div>
    </div>

    <div class="display-options-section">
      <h3>Anzeigeoptionen für Kodieraufträge</h3>
      <p class="section-description">Steuern Sie, welche Elemente während der Kodierung angezeigt werden sollen.</p>

      <form [formGroup]="displayOptionsForm" class="display-options-controls">
        <mat-checkbox formControlName="showScore" class="display-option-checkbox">
          Scores anzeigen
        </mat-checkbox>

        <mat-checkbox formControlName="allowComments" class="display-option-checkbox">
          Kommentare erlauben
        </mat-checkbox>

        <mat-checkbox formControlName="suppressGeneralInstructions" class="display-option-checkbox">
          Allgemeine Anweisungen ausblenden
        </mat-checkbox>
      </form>
    </div>

  </div>

  <div class="dialog-actions">
    <button mat-button (click)="onCancel()">Abbrechen</button>
    <button mat-raised-button color="primary" (click)="onConfirm()">
      {{ jobPreviews.length }} Kodieraufträge erstellen
    </button>
  </div>
</div>
