<mat-card class="selector-card">
  <mat-card-content class="selector-content">
    <div class="codes-section">
      <div *ngIf="regularCodes.length; else noCodes">
        <div class="code-list scrollable-codes">
          <div class="code-row"
               [class.selected]="item.id === selectedCode"
               *ngFor="let item of regularCodes; let i = index; let isLast = last"
               (click)="onSelect(item.id)">
            <div class="code-content">
              <span class="code-info">
                <span class="code-id">{{ item.id }}</span>
                <span class="code-score" *ngIf="item.score !== undefined">{{ 'code-selector.score-label' | translate }} {{ item.score }}</span>
              </span>
            </div>
            <div class="code-instruction" *ngIf="item.manualInstruction" [innerHTML]="getSafeHtml(item.manualInstruction)"></div>
          </div>
        </div>

        <div class="uncertain-codes-section">
          <div class="code-row"
               [class.selected]="item.id === selectedCode"
               *ngFor="let item of uncertainCodes; let i = index; let isLast = last"
               (click)="onSelect(item.id)">
            <div class="code-content">
              <span class="uncertain-text">{{ item.label }}</span>
            </div>
          </div>
        </div>
      </div>

      <ng-template #noCodes>
        <div class="hint">{{ 'code-selector.no-codes-found' | translate }} {{ variableId }}.</div>
      </ng-template>
    </div>

    <div class="deselect-container fixed-section">
      <button mat-button class="deselect-button" (click)="deselectAll()">Code-Auswahl entfernen</button>
    </div>

    <mat-form-field appearance="outline" class="notes-field fixed-section">
      <textarea matInput
        [(ngModel)]="coderNotes"
        (input)="onNotesChanged()"
        placeholder="{{ 'code-selector.coder-notes-placeholder' | translate }}"
        rows="3"></textarea>
    </mat-form-field>
  </mat-card-content>
</mat-card>
