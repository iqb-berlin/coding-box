<mat-card class="selector-card">
  <mat-card-header>
    <mat-card-title>{{ 'code-selector.codes-for-variable' | translate }} {{ variableId }}</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <div class="open-checkbox-container">
      <mat-checkbox
        [(ngModel)]="isOpen"
        (change)="onOpenChanged()"
        [disabled]="selectedCode !== null">
        {{ 'code-selector.mark-as-open' | translate }}
      </mat-checkbox>
      <div class="open-explanation" *ngIf="isOpen">
        {{ 'code-selector.open-explanation' | translate }}
      </div>
    </div>

    <div *ngIf="selectableItems.length && !isOpen; else noCodes">
      <mat-radio-group [(ngModel)]="selectedCode">
        <div class="code-row" *ngFor="let item of selectableItems">
          <mat-radio-button [value]="item.id" (change)="onSelect(item.id)">
            <span class="code-info">
              <span class="code-id">{{ item.id }}</span>
              <span class="code-type">({{ item.type }})</span>
              <span class="code-score" *ngIf="item.score !== undefined">{{ 'code-selector.score-label' | translate }} {{ item.score }}</span>
            </span>
          </mat-radio-button>
          <div class="code-instruction" *ngIf="item.manualInstruction" [innerHTML]="getSafeHtml(item.manualInstruction)"></div>
          <div class="missing-description" *ngIf="item.isMissing && item.description" [innerHTML]="getSafeHtml(item.description)"></div>
        </div>
      </mat-radio-group>
    </div>
    <ng-template #noCodes>
      <div class="hint">{{ 'code-selector.no-codes-found' | translate }} {{ variableId }}.</div>
    </ng-template>
  </mat-card-content>
</mat-card>
